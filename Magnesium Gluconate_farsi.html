<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مونوگراف منیزیم گلوکونات (USP)</title>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body {
            font-family: 'Vazirmatn', sans-serif;
            background-color: #f8fafc;
            color: #333;
        }
        .tab-active {
            border-color: #3b82f6;
            color: #3b82f6;
            font-weight: bold;
        }
        .tab-inactive {
            border-color: transparent;
            color: #6b7280;
        }
        .card {
            background-color: #fff;
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        }
        .ltr-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        table {
            width: 100%;
            margin-left: auto;
            margin-right: auto;
            direction: rtl;
            text-align: center;
            border-collapse: collapse;
            margin-top: 1rem;
            margin-bottom: 1rem;
        }
        table th, table td {
            border: 1px solid #e2e8f0;
            padding: 0.75rem;
            text-align: center;
        }
        table th {
            background-color: #f1f5f9;
            font-weight: bold;
        }
        .formula-display {
            display: flex;
            justify-content: center;
            margin-top: 1rem;
            margin-bottom: 1rem;
            direction: ltr;
        }
        .pass-text {
            color: #22c55e;
        }
        .fail-text {
            color: #ef4444;
        }
        .interactive-card {
            background-color: #e0f2fe;
            border: 1px solid #90cdf4;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 0.5rem;
        }
        .calculation-button {
            background-color: #2563eb;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            font-weight: bold;
            cursor: pointer;
            border: none;
        }
        .status-dropdown {
             shadow: appearance-none border border-gray-300 bg-white rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline w-48;
             width: 12rem; /* 192px */
             background-color: white;
             border-color: #d1d5db;
        }
        .additional-spec-input {
            shadow: appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline;
        }
        .input-field {
            direction: ltr;
            text-align: left;
            display: inline-block;
            shadow: appearance-none border border-gray-300 bg-white rounded w-64 py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline my-2;
            width: 16rem; /* 256px */
            background-color: white;
            border-color: #d1d5db;
        }
    </style>
</head>
<body>
    <div class="container mx-auto p-4 max-w-4xl">

        <h1 class="text-3xl font-bold text-center text-blue-700 mb-6">منیزیم گلوکونات</h1>

        <div class="flex justify-center mb-6 border-b border-gray-200">
            <button class="tab-button py-2 px-4 border-b-2 tab-active" onclick="showTab('definition')">تعریف</button>
            <button class="tab-button py-2 px-4 border-b-2" onclick="showTab('identification')">شناسایی</button>
            <button class="tab-button py-2 px-4 border-b-2" onclick="showTab('assay')">سنجش</button>
            <button class="tab-button py-2 px-4 border-b-2" onclick="showTab('impurities')">ناخالصی‌ها</button>
            <button class="tab-button py-2 px-4 border-b-2" onclick="showTab('specific_tests')">آزمایشات خاص</button>
            <button class="tab-button py-2 px-4 border-b-2" onclick="showTab('additional_requirements')">الزامات اضافی</button>
        </div>

        <!-- Definition Tab -->
        <div id="definition" class="tab-content">
            <div class="card">
                <h2 class="text-2xl font-semibold text-blue-600 mb-4">تعریف</h2>
                <p class="mb-4">منیزیم گلوکونات حاوی حداقل 98.0% و حداکثر 102.0% منیزیم گلوکونات انیدروس (C12H22MgO14)، محاسبه شده بر اساس پایه انیدروس است.</p>
            </div>
        </div>

        <!-- Identification Tab -->
        <div id="identification" class="tab-content hidden">
            <div class="card">
                <h2 class="text-2xl font-semibold text-blue-600 mb-4">شناسایی</h2>

                <h3 class="text-xl font-semibold text-blue-600 mb-2">تست‌های شناسایی</h3>
                <p class="mb-4"><strong>الف. تست‌های شناسایی - عمومی، منیزیم</strong> <a href="General chapters/191.html" class="text-blue-600 hover:underline" target="_blank">191</a>: محلول 100 میلی‌گرم بر میلی‌لیتر شرایط را برآورده می‌کند.</p>

                <h3 class="text-xl font-semibold text-blue-600 mb-2">ب. کروماتوگرافی لایه نازک</h3>
                <p class="mb-2"><strong>محلول استاندارد:</strong> 10 میلی‌گرم بر میلی‌لیتر USP پتاسیم گلوکونات RS</p>
                <p class="mb-4"><strong>محلول نمونه:</strong> 10 میلی‌گرم بر میلی‌لیتر منیزیم گلوکونات، در صورت لزوم با گرم کردن در حمام آب در دمای 60 درجه سانتی‌گراد برای حل شدن</p>

                <h4 class="text-lg font-semibold text-gray-700 mt-3 mb-2">سیستم کروماتوگرافی</h4>
                <p class="mb-2">(به کروماتوگرافی <a href="General chapters/621.html" class="text-blue-600 hover:underline" target="_blank">621</a>، کروماتوگرافی لایه نازک مراجعه کنید.)</p>
                <p class="mb-2"><strong>حالت:</strong> TLC</p>
                <p class="mb-2"><strong>جاذب:</strong> لایه 0.25 میلی‌متری ژل سیلیکا کروماتوگرافی</p>
                <p class="mb-2"><strong>حجم تزریق:</strong> 5 µL</p>
                <p class="mb-2"><strong>سیستم حلال توسعه:</strong> الکل، اتیل استات، آمونیوم هیدروکسید و آب (50:10:10:30)</p>
                <p class="mb-2"><strong>معرف اسپری:</strong> 2.5 گرم مولیبدات آمونیوم را در 50 میلی‌لیتر اسید سولفوریک 2 نرمال در یک فلاسک حجمی 100 میلی‌لیتر حل کنید، 1.0 گرم سولفات سریم اضافه کنید، برای حل شدن بچرخانید و با اسید سولفوریک 2 نرمال به حجم برسانید.</p>

                <h4 class="text-lg font-semibold text-gray-700 mt-3 mb-2">تجزیه و تحلیل</h4>
                <p class="mb-2"><strong>نمونه‌ها:</strong> محلول استاندارد و محلول نمونه</p>
                <p class="mb-2">کروماتوگرام را تا زمانی که لبه حلال حدود سه چهارم طول صفحه حرکت کند، توسعه دهید.</p>
                <p class="mb-2">صفحه را از محفظه خارج کرده و در دمای 110 درجه سانتی‌گراد به مدت 20 دقیقه خشک کنید.</p>
                <p class="mb-2">اجازه دهید خنک شود، و با معرف اسپری اسپری کنید.</p>
                <p class="mb-4">صفحه را در دمای 110 درجه سانتی‌گراد به مدت حدود 10 دقیقه حرارت دهید.</p>

                <h4 class="text-lg font-semibold text-gray-700 mt-3 mb-2">معیارهای پذیرش:</h4>
                <p>نقطه اصلی محلول نمونه از نظر رنگ، اندازه و مقدار R<sub>F</sub> با محلول استاندارد مطابقت دارد.</p>
            </div>
        </div>

        <!-- Assay Tab -->
        <div id="assay" class="tab-content hidden">
            <div class="card">
                <h2 class="text-2xl font-semibold text-blue-600 mb-4">سنجش</h2>

                <h4 class="text-lg font-semibold text-gray-700 mt-3 mb-2">روش</h4>
                <p class="mb-2"><strong>نمونه:</strong> 800 میلی‌گرم منیزیم گلوکونات</p>
                <p class="mb-4"><strong>شاهد:</strong> 20 میلی‌لیتر آب</p>

                <h4 class="text-lg font-semibold text-gray-700 mt-3 mb-2">سیستم تیتراسیون</h4>
                <p class="mb-2">(به تیتراسیون <a href="General chapters/541.html" class="text-blue-600 hover:underline" target="_blank">541</a> مراجعه کنید.)</p>
                <p class="mb-2"><strong>حالت:</strong> تیتراسیون مستقیم</p>
                <p class="mb-2"><strong>تیترانت:</strong> 0.05 مولار محلول ادتات دی‌سدیم VS</p>
                <p class="mb-4"><strong>تشخیص نقطه پایانی:</strong> بصری</p>

                <h4 class="text-lg font-semibold text-gray-700 mt-3 mb-2">تجزیه و تحلیل</h4>
                <p class="mb-4">نمونه را در 20 میلی‌لیتر آب حل کنید. 5 میلی‌لیتر بافر آمونیاک-آمونیم کلراید TS و 0.1 میلی‌لیتر اریکروم سیاه TS اضافه کنید. با تیتترانت تا نقطه پایانی آبی تیتراسیون کنید.</p>
                <p>تعیین شاهد را انجام دهید.</p>

                <h4 class="text-lg font-semibold text-gray-700 mt-3 mb-2">محاسبه درصد منیزیم گلوکونات (C12H22MgO14) در نمونه گرفته شده:</h4>
                <div class="formula-display">
                    $$ \text{Result} = \left\{ \frac{(V_S - V_B) \times M \times F}{W} \right\} \times 100 $$
                </div>
                <p class="mb-2"><span class="ltr-text">V<sub>S</sub></span> = حجم تیتترانت مصرف شده توسط نمونه (mL)</p>
                <p class="mb-2"><span class="ltr-text">V<sub>B</sub></span> = حجم تیتترانت مصرف شده توسط شاهد (mL)</p>
                <p class="mb-2"><span class="ltr-text">M</span> = مولاریته تیتترانت (mM/mL)</p>
                <p class="mb-2"><span class="ltr-text">F</span> = ضریب هم‌ارزی، 414.6 mg/mM</p>
                <p class="mb-4"><span class="ltr-text">W</span> = وزن نمونه (mg)</p>

                <h4 class="text-lg font-semibold text-gray-700 mt-3 mb-2">معیارهای پذیرش:</h4>
                <p>98.0%–102.0% بر اساس پایه انیدروس</p>

                <div class="card interactive-card">
                    <h4 class="text-lg font-semibold text-gray-700 mb-2">ماشین حساب سنجش</h4>
                    <div class="mb-4">
                        <label for="assay_VS" class="block text-sm font-bold mb-1">حجم تیتترانت مصرف شده توسط نمونه (VS) (mL):</label>
                        <input type="text" id="assay_VS" name="assay_VS" class="input-field">
                    </div>
                    <div class="mb-4">
                        <label for="assay_VB" class="block text-sm font-bold mb-1">حجم تیتترانت مصرف شده توسط شاهد (VB) (mL):</label>
                        <input type="text" id="assay_VB" name="assay_VB" class="input-field">
                    </div>
                    <div class="mb-4">
                        <label for="assay_W" class="block text-sm font-bold mb-1">وزن نمونه (W) (mg):</label>
                        <input type="text" id="assay_W" name="assay_W" class="input-field">
                    </div>
                    <button class="calculation-button" onclick="calculateAssay()">محاسبه</button>
                    <div class="mt-4">
                        <span class="font-bold">نتیجه:</span> <span id="assay_result"></span>
                    </div>
                    <div class="mt-2">
                        <span class="font-bold">وضعیت:</span> <span id="assay_status" class="font-bold"></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Impurities Tab -->
        <div id="impurities" class="tab-content hidden">
            <div class="card">
                <h2 class="text-2xl font-semibold text-blue-600 mb-4">ناخالصی‌ها</h2>

                <h3 class="text-xl font-semibold text-blue-600 mb-2">کلرید و سولفات</h3>
                <p class="mb-2"><strong>کلرید</strong> <a href="General chapters/221.html" class="text-blue-600 hover:underline" target="_blank">221</a></p>
                <p class="mb-2"><strong>محلول استاندارد:</strong> 0.7 میلی‌لیتر اسید هیدروکلریک 0.020 نرمال</p>
                <p class="mb-2"><strong>نمونه:</strong> 1.0 گرم</p>
                <p class="mb-4"><strong>معیارهای پذیرش:</strong> حداکثر 0.05%</p>

                <p class="mb-2"><strong>سولفات</strong> <a href="General chapters/221.html" class="text-blue-600 hover:underline" target="_blank">221</a></p>
                <p class="mb-2"><strong>محلول استاندارد:</strong> 1.0 میلی‌لیتر اسید سولفوریک 0.020 نرمال</p>
                <p class="mb-2"><strong>نمونه:</strong> 2.0 گرم</p>
                <p class="mb-4"><strong>معیارهای پذیرش:</strong> حداکثر 0.05%</p>

                <h3 class="text-xl font-semibold text-blue-600 mb-2">مواد کاهنده</h3>
                <p class="mb-2"><strong>نمونه:</strong> 1.0 گرم منیزیم گلوکونات</p>
                <p class="mb-4"><strong>شاهد:</strong> 10 میلی‌لیتر آب</p>

                <h4 class="text-lg font-semibold text-gray-700 mt-3 mb-2">سیستم تیتراسیون</h4>
                <p class="mb-2">(به تیتراسیون <a href="General chapters/541.html" class="text-blue-600 hover:underline" target="_blank">541</a> مراجعه کنید.)</p>
                <p class="mb-2"><strong>حالت:</strong> تیتراسیون باقی‌مانده</p>
                <p class="mb-2"><strong>تیترانت:</strong> 0.1 نرمال ید VS</p>
                <p class="mb-2"><strong>تیترانت برگشتی:</strong> 0.1 نرمال سدیم تیوسولفات VS</p>
                <p class="mb-4"><strong>تشخیص نقطه پایانی:</strong> بصری</p>

                <h4 class="text-lg font-semibold text-gray-700 mt-3 mb-2">تجزیه و تحلیل</h4>
                <p class="mb-4">نمونه را در یک فلاسک مخروطی 250 میلی‌لیتری منتقل کرده، در 10 میلی‌لیتر آب حل کنید و 25 میلی‌لیتر معرف سیترات کوپریک قلیایی TS اضافه کنید. فلاسک را بپوشانید، به مدت 5 دقیقه به آرامی بجوشانید، زمان‌بندی دقیق انجام دهید و به سرعت تا دمای اتاق خنک کنید. 25 میلی‌لیتر اسید استیک 0.6 نرمال، 10.0 میلی‌لیتر تیتترانت، و 10 میلی‌لیتر اسید هیدروکلریک 3 نرمال اضافه کنید و با تیتترانت برگشتی تیتراسیون کنید و 3 میلی‌لیتر نشاسته TS را هنگام نزدیک شدن به نقطه پایانی اضافه کنید. تعیین شاهد را انجام دهید.</p>

                <h4 class="text-lg font-semibold text-gray-700 mt-3 mb-2">محاسبه درصد مواد کاهنده (به صورت دکستروز) در نمونه گرفته شده:</h4>
                <div class="formula-display">
                    $$ \text{Result} = \left\{ \frac{(V_B - V_S) \times N \times F}{W} \right\} \times 100 $$
                </div>
                <p class="mb-2"><span class="ltr-text">V<sub>B</sub></span> = حجم تیتترانت برگشتی مصرف شده توسط شاهد (mL)</p>
                <p class="mb-2"><span class="ltr-text">V<sub>S</sub></span> = حجم تیتترانت برگشتی مصرف شده توسط نمونه (mL)</p>
                <p class="mb-2"><span class="ltr-text">N</span> = نرمالیته تیتترانت برگشتی (mEq/mL)</p>
                <p class="mb-2"><span class="ltr-text">F</span> = ضریب هم‌ارزی، 27 mg/mEq</p>
                <p class="mb-4"><span class="ltr-text">W</span> = وزن نمونه (mg)</p>

                <h4 class="text-lg font-semibold text-gray-700 mt-3 mb-2">معیارهای پذیرش:</h4>
                <p>حداکثر 1.0%</p>

                <div class="card interactive-card">
                    <h4 class="text-lg font-semibold text-gray-700 mb-2">ماشین حساب مواد کاهنده</h4>
                    <div class="mb-4">
                        <label for="reducing_VB" class="block text-sm font-bold mb-1">حجم تیتترانت برگشتی شاهد (VB) (mL):</label>
                        <input type="text" id="reducing_VB" name="reducing_VB" class="input-field">
                    </div>
                    <div class="mb-4">
                        <label for="reducing_VS" class="block text-sm font-bold mb-1">حجم تیتترانت برگشتی نمونه (VS) (mL):</label>
                        <input type="text" id="reducing_VS" name="reducing_VS" class="input-field">
                    </div>
                    <div class="mb-4">
                        <label for="reducing_N" class="block text-sm font-bold mb-1">نرمالیته تیتترانت برگشتی (N) (mEq/mL):</label>
                        <input type="text" id="reducing_N" name="reducing_N" class="input-field">
                    </div>
                     <div class="mb-4">
                        <label for="reducing_W" class="block text-sm font-bold mb-1">وزن نمونه (W) (mg):</label>
                        <input type="text" id="reducing_W" name="reducing_W" class="input-field">
                    </div>
                    <button class="calculation-button" onclick="calculateReducingSubstances()">محاسبه</button>
                    <div class="mt-4">
                        <span class="font-bold">نتیجه:</span> <span id="reducing_result"></span>
                    </div>
                    <div class="mt-2">
                        <span class="font-bold">وضعیت:</span> <span id="reducing_status" class="font-bold"></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Specific Tests Tab -->
        <div id="specific_tests" class="tab-content hidden">
            <div class="card">
                <h2 class="text-2xl font-semibold text-blue-600 mb-4">آزمایشات خاص</h2>

                <h3 class="text-xl font-semibold text-blue-600 mb-2">pH</h3>
                <p class="mb-2"><strong>محلول نمونه:</strong> 50 میلی‌گرم بر میلی‌لیتر</p>
                <p class="mb-4"><strong>معیارهای پذیرش:</strong> 6.0–7.8</p>

                <div class="card interactive-card">
                    <h4 class="text-lg font-semibold text-gray-700 mb-2">تعیین pH</h4>
                    <label for="ph_status" class="block text-sm font-bold mb-1">وضعیت:</label>
                    <select id="ph_status" name="ph_status" class="status-dropdown">
                        <option value=""></option>
                        <option value="Pass">Pass</option>
                        <option value="Fail">Fail</option>
                    </select>
                     <textarea id="ph_additional_specs" name="ph_additional_specs" rows="3" placeholder="توضیحات اضافه / Additional Specifications:" class="additional-spec-input mt-4"></textarea>
                </div>

                <h3 class="text-xl font-semibold text-blue-600 mb-2">تعیین آب</h3>
                <p class="mb-2">روش Ib <a href="General chapters/921.html" class="text-blue-600 hover:underline" target="_blank">921</a></p>
                <p class="mb-4"><strong>آماده‌سازی تست:</strong> طبق دستورالعمل فصل عمل کنید. 30 دقیقه برای انحلال منیزیم گلوکونات و تکمیل واکنش در نظر بگیرید.</p>
                <p class="mb-4"><strong>شاهد:</strong> از همان حجم معرف به عنوان آماده‌سازی تست اما بدون نمونه استفاده کنید.</p>

                <h4 class="text-lg font-semibold text-gray-700 mt-3 mb-2">تجزیه و تحلیل</h4>
                <p class="mb-4">نمونه‌ها: آماده‌سازی تست و شاهد</p>

                <h4 class="text-lg font-semibold text-gray-700 mt-3 mb-2">محتوای آب را بر حسب میلی‌گرم منیزیم گلوکونات گرفته شده محاسبه کنید:</h4>
                 <div class="formula-display">
                    $$ \text{Result} = F \times (X_B - X) \times R $$
                 </div>
                <p class="mb-2"><span class="ltr-text">X<sub>B</sub></span> = حجم محلول استاندارد آب-متانول مورد نیاز برای خنثی کردن معرف مصرف نشده در تعیین شاهد (mL)</p>
                <p class="mb-4">سایر اصطلاحات همانطور که در تعیین آب، روش Ib <a href="General chapters/921.html" class="text-blue-600 hover:underline" target="_blank">921</a> تعریف شده‌اند.</p>

                <h4 class="text-lg font-semibold text-gray-700 mt-3 mb-2">معیارهای پذیرش:</h4>
                <p>3.0%–12.0%</p>

                 <div class="card interactive-card">
                    <h4 class="text-lg font-semibold text-gray-700 mb-2">ماشین حساب تعیین آب</h4>
                    <p class="mb-4">(توجه: این ماشین حساب بر اساس مقادیر Xb، X و R است که باید از دستگاهی خوانده شود. برای این شبیه‌سازی، نیاز به ورودی از کاربر برای Xb، X و R داریم.)</p>
                    <div class="mb-4">
                        <label for="water_XB" class="block text-sm font-bold mb-1">حجم محلول استاندارد آب-متانول شاهد (XB) (mL):</label>
                        <input type="text" id="water_XB" name="water_XB" class="input-field">
                    </div>
                    <div class="mb-4">
                        <label for="water_X" class="block text-sm font-bold mb-1">حجم محلول استاندارد آب-متانول نمونه (X) (mL):</label>
                        <input type="text" id="water_X" name="water_X" class="input-field">
                    </div>
                    <div class="mb-4">
                        <label for="water_R" class="block text-sm font-bold mb-1">فاکتور R (ضریب تصحیح):</label>
                        <input type="text" id="water_R" name="water_R" class="input-field">
                    </div>
                    <div class="mb-4">
                        <label for="water_W" class="block text-sm font-bold mb-1">وزن نمونه (mg):</label>
                        <input type="text" id="water_W" name="water_W" class="input-field">
                    </div>
                    <button class="calculation-button" onclick="calculateWaterContent()">محاسبه</button>
                    <div class="mt-4">
                        <span class="font-bold">نتیجه (mg):</span> <span id="water_result_mg"></span>
                    </div>
                     <div class="mt-2">
                        <span class="font-bold">نتیجه (%):</span> <span id="water_result_percent"></span>
                    </div>
                    <div class="mt-2">
                        <span class="font-bold">وضعیت:</span> <span id="water_status" class="font-bold"></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Additional Requirements Tab -->
        <div id="additional_requirements" class="tab-content hidden">
            <div class="card">
                <h2 class="text-2xl font-semibold text-blue-600 mb-4">الزامات اضافی</h2>

                <h3 class="text-xl font-semibold text-blue-600 mb-2">بسته بندی و نگهداری</h3>
                <p>در ظروف کاملاً بسته نگهداری شود.</p>

                <h3 class="text-xl font-semibold text-blue-600 mb-2">استانداردهای مرجع USP</h3>
                <p>USP پتاسیم گلوکونات RS</p>
            </div>
        </div>

    </div>

    <script>
        function showTab(tabId) {
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => {
                content.classList.add('hidden');
            });

            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => {
                button.classList.remove('tab-active');
                button.classList.add('tab-inactive');
            });

            document.getElementById(tabId).classList.remove('hidden');
            event.currentTarget.classList.add('tab-active');
        }

        function calculateAssay() {
            const VS = parseFloat(document.getElementById('assay_VS').value);
            const VB = parseFloat(document.getElementById('assay_VB').value);
            const W = parseFloat(document.getElementById('assay_W').value);

            if (isNaN(VS) || isNaN(VB) || isNaN(W) || W === 0) {
                document.getElementById('assay_result').textContent = "لطفا مقادیر معتبر وارد کنید.";
                document.getElementById('assay_status').textContent = "";
                return;
            }

            const M = 0.05; // Titrant molarity (mM/mL)
            const F = 414.6; // Equivalence factor (mg/mM)

            const result = ((VS - VB) * M * F / W) * 100;

            document.getElementById('assay_result').textContent = result.toFixed(2) + "%";

            const lowerLimit = 98.0;
            const upperLimit = 102.0;

            if (result >= lowerLimit && result <= upperLimit) {
                document.getElementById('assay_status').textContent = "Pass";
                document.getElementById('assay_status').className = "font-bold pass-text";
            } else {
                document.getElementById('assay_status').textContent = "Fail";
                document.getElementById('assay_status').className = "font-bold fail-text";
            }
        }

        function calculateReducingSubstances() {
            const VB = parseFloat(document.getElementById('reducing_VB').value);
            const VS = parseFloat(document.getElementById('reducing_VS').value);
            const N = 0.1; // Back titrant normality (mEq/mL)
            const W = parseFloat(document.getElementById('reducing_W').value);

            if (isNaN(VB) || isNaN(VS) || isNaN(W) || W === 0) {
                document.getElementById('reducing_result').textContent = "لطفا مقادیر معتبر وارد کنید.";
                document.getElementById('reducing_status').textContent = "";
                return;
            }

            const F = 27; // Equivalence factor (mg/mEq)

            const result = ((VB - VS) * N * F / W) * 100;

            document.getElementById('reducing_result').textContent = result.toFixed(2) + "%";

            const limit = 1.0;

            if (result <= limit) {
                document.getElementById('reducing_status').textContent = "Pass";
                document.getElementById('reducing_status').className = "font-bold pass-text";
            } else {
                document.getElementById('reducing_status').textContent = "Fail";
                document.getElementById('reducing_status').className = "font-bold fail-text";
            }
        }

        function calculateWaterContent() {
            const XB = parseFloat(document.getElementById('water_XB').value);
            const X = parseFloat(document.getElementById('water_X').value);
            const R = parseFloat(document.getElementById('water_R').value);
            const W = parseFloat(document.getElementById('water_W').value); // Sample weight in mg

            if (isNaN(XB) || isNaN(X) || isNaN(R) || isNaN(W) || W === 0) {
                document.getElementById('water_result_mg').textContent = "لطفا مقادیر معتبر وارد کنید.";
                document.getElementById('water_result_percent').textContent = "";
                document.getElementById('water_status').textContent = "";
                return;
            }

            const result_mg = R * (XB - X);
            const result_percent = (result_mg / W) * 100;

            document.getElementById('water_result_mg').textContent = result_mg.toFixed(2) + " mg";
            document.getElementById('water_result_percent').textContent = result_percent.toFixed(2) + "%";

            const lowerLimit = 3.0;
            const upperLimit = 12.0;

            if (result_percent >= lowerLimit && result_percent <= upperLimit) {
                document.getElementById('water_status').textContent = "Pass";
                document.getElementById('water_status').className = "font-bold pass-text";
            } else {
                document.getElementById('water_status').textContent = "Fail";
                document.getElementById('water_status').className = "font-bold fail-text";
            }
        }

        // Initialize tabs to show the first one by default
        document.addEventListener('DOMContentLoaded', () => {
            const firstTabButton = document.querySelector('.tab-button.tab-active');
            if (firstTabButton) {
                const tabId = firstTabButton.getAttribute('onclick').split("'")[1];
                showTab(tabId);
            }
        });
    </script>
</body>
</html>